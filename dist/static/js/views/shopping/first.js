webpackJsonp([2],{106:function(t,e,s){s(278);var a=s(1)(s(204),s(341),null,null);t.exports=a.exports},171:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(0),c=s(106),n=s.n(c);new a.default({render:function(t){return t(n.a)}}).$mount("#app")},19:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var a=s(2),c=s(7),n=s.n(c);e.default={name:"g-head",data:function(){return{login:!1,lev:!1,address:!1,cart:!1,code:!1,open:!1,float:!1,personInfo:[],codeSrc:"",addressItem:[],postion:"宁波"}},computed:{phone:function(){if(this.personInfo.mob)return this.personInfo.mob.slice(0,2)+"******"+this.personInfo.mob.slice(8,11)}},methods:{exit:function(){a.a.M.store.set("login",!1),location.reload()},jNav1:function(e){t(".m-float").hide(),t(e.currentTarget).find(".m-float").show()},jNav2:function(e){t(".m-float").hide()},jLev1:function(){this.lev=!0},jLev2:function(){this.lev=!1},jAddress1:function(){this.address=!0},jAddress2:function(){this.address=!1},set:function(t){console.log(t),this.postion=t.nmCn,this.address=!1},jCode1:function(){this.code=!0},jCode2:function(){this.code=!1},jTop:function(){t("body").animate({scrollTop:0})}},mounted:function(){var t=this;this.axios.get(a.a.C.url_mc+"/mall/sys/sysCat/listByPrntCd",{params:{prntCd:9014}}).then(function(e){t.addressItem=e.data.data.items}).catch(function(t){console.log(t)}),this.codeSrc="http://192.168.1.160:8083/mall/bss/ip/QRCode?url=https://www.baidu.com/",a.a.M.store.get("userInfo")&&(this.userId=a.a.M.store.get("userInfo").ipPk),a.a.M.store.get("login")&&(this.login=!0,this.axios.get(a.a.C.url_mc+"/mall/bss/ip/user",{params:{ipPk:this.userId}}).then(function(e){t.personInfo=e.data.data}).catch(function(t){console.log(t)}))},props:["lists","allNum","allPrice","cutTime"],components:{countDown:n.a}}}.call(e,s(4))},204:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(2),c=s(25),n=s.n(c),i=s(5),o=s.n(i),r=s(7),l=s.n(r),u=s(320);s.n(u);e.default={data:function(){return{cars:[],checked:!1,carList:0,carCheck:0,carPrice:0,carNum:0,rule:0,cutTime:"-999",shopItem:[]}},components:{CarHead:n.a,McFoot:o.a,countDown:l.a},beforeCreate:function(){},beforeMount:function(){},mounted:function(){var t=this;a.a.M.store.get("userInfo")&&(this.userId=a.a.M.store.get("userInfo").ipPk),this.axios.get(a.a.C.url_mc+"/mall/bss/cart/cartList?t="+Date.now(),{params:{ipPk:this.userId}}).then(function(e){console.log(e.data.data);var s=[];e.data.data.forEach(function(t,e){s.push({isCheck:!1,id:t.prodPk,aPic:t.imgUrl,title:t.prodNm,price:t.membAmt,num1:t.qty,stock:t.stock,cartPk:t.cartPk})}),t.cars=s,t.carList=t.cars.length,t.cutTime=String(e.data.data[0].effectiveTime/1e3)}).catch(function(t){console.log(t)}),this.axios.get(a.a.C.url_mc+"/mall/bss/ip/asset",{params:{ipPk:this.userId}}).then(function(e){console.log(e.data.data.rule),t.rule=e.data.data.rule}).catch(function(t){console.log(t)}),this.axios.get(a.a.C.url_mc+"/mall/bss/prod/prodBHList",{params:{ipPk:this.userId,count:5}}).then(function(e){t.shopItem=e.data.data.items}).catch(function(t){console.log(t)})},watch:{checked:function(t,e){1==t?(this.carList=this.cars.length,this.carCheck=this.cars.length,this.cars.forEach(function(t,e){t.isCheck=!0})):(this.carCheck=0,this.carPrice=0,this.cars.forEach(function(t,e){t.isCheck=!1}))},carPrice:function(t){this.carNum=parseInt(t)*this.rule,this.carNum=Math.floor(parseInt(t)/10)},cars:{handler:function(t){var e=this;this.carPrice=0,this.carCheck=0,t.forEach(function(t,s){t.isCheck&&(e.carPrice+=t.num1*t.price,e.carCheck+=1)})},deep:!0}},methods:{del:function(t){var e=this;this.axios.get(a.a.C.url_mc+"/mall/bss/cart/del",{params:{ipPk:this.userId,prodPk:t.id}}).then(function(s){e.cars.splice(e.cars.indexOf(t),1);var a=0,c=0;e.carList.map(function(t){a=this.carList.length,c+=t.price*t.num1,this.carPrice=c,this.carList=a}.bind(e)),e.carList.length||(console.log("清空了"),e.cutTime="0")}).catch(function(t){console.log(t)})},callback:function(){console.log("结束1")},changeNum:function(t){var e=this,c=t.num1;setTimeout(function(){var n=this,i=t.num1,o=s(9),r=e.$loading({lock:!0,text:"修改数量中，请稍等",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"});e.axios.post(a.a.C.url_mc+"/mall/bss/cart/edit",o.stringify({cartPk:t.cartPk,num:i-c})).then(function(t){console.log(t.data),200==t.data.status&&(r.close(),e.$alert("修改成功","提示",{confirmButtonText:"确定",callback:function(t){}})),400==t.data.status&&e.$alert(t.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}}),301==t.data.status&&(r.close(),e.$alert(t.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){e.axios.get(a.a.C.url_mc+"/mall/bss/cart/cartList?t="+Date.now(),{params:{ipPk:e.userId}}).then(function(t){console.log(t.data.data);var s=[];t.data.data.forEach(function(t,e){s.push({isCheck:!1,id:t.prodPk,aPic:t.imgUrl,title:t.prodNm,price:t.membAmt,num1:t.qty,stock:t.stock,cartPk:t.cartPk})}),e.cars=s,e.carList=n.cars.length}).catch(function(t){console.log(t)})}}))}).catch(function(t){console.log(t)})})},go:function(){window.location.href="second.html"}}}},23:function(t,e){},24:function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"g-head clearfix"},[a("div",{staticClass:"m-top clearfix"},[a("div",{staticClass:"m-content"},[t.login?t._e():a("div",{staticClass:"m-login"},[t._v("\n          欢迎登录天胜农牧，请 "),a("a",{attrs:{href:"../home/login.html"}},[t._v("登录")]),t._v(" "),a("a",{attrs:{href:"../home/register.html"}},[t._v("注册")])]),t._v(" "),t.login?a("div",{staticClass:"m-lev",on:{mouseenter:t.jLev1,mouseleave:t.jLev2}},[a("p",{class:{"f-active":t.lev}},[a("a",{attrs:{href:"../center/router.html#/index"}},[a("span",[t._v("您好！"+t._s(t.phone)+" "),a("i",{staticClass:"el-icon-arrow-down"})])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.lev,expression:"lev"}],staticClass:"u-lev"},[a("h2",[t._v(t._s(t.phone)),a("em",{on:{click:t.exit}},[t._v("退出")])]),t._v(" "),a("ul",{staticClass:"clearfix"},[a("li",[a("h3",[t._v("级别")]),t._v(" "),a("h4",[t._v(t._s(t.personInfo.memRankNmCn))]),t._v(" "),a("strong")]),t._v(" "),a("li",[a("h3",[t._v("积分")]),t._v(" "),a("h4",[t._v(t._s(t.personInfo.pointQty)+"分（"+t._s(t._f("currency")(t.personInfo.pointQty*t.personInfo.pointRule,""))+"元）")]),t._v(" "),a("strong")]),t._v(" "),a("li",[a("h3",[t._v("余额")]),t._v(" "),a("h4",[t._v(t._s(t._f("currency")(t.personInfo.balaAmt,""))+"元")])])])])]):t._e(),t._v(" "),a("div",{staticClass:"m-address",on:{mouseenter:t.jAddress1,mouseleave:t.jAddress2}},[a("h2",{class:{"f-active":t.address}},[t._v("基地："),a("span",[t._v(t._s(t.postion))]),t._v(" "),a("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.address,expression:"address"}]},t._l(t.addressItem,function(e,s){return a("span",{staticStyle:{"margin-right":"20px"},attrs:{rel:e.nmCn},on:{click:function(s){t.set(e)}}},[t._v(t._s(e.desc))])}))]),t._v(" "),a("ul",{staticClass:"m-nav"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),a("li",{staticClass:"m-code",class:{"f-active":t.code},on:{mouseenter:t.jCode1,mouseleave:t.jCode2}},[a("a",{attrs:{href:"javascript:;"}},[t._v("掌上天胜")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.code,expression:"code"}]},[a("img",{attrs:{src:t.codeSrc,alt:""}}),t._v(" "),a("p",[t._v("关注微信公众号")])])])])])]),t._v(" "),a("div",{staticClass:"m-bottom"},[a("div",{staticClass:"m-content"},[a("img",{attrs:{src:s(16),alt:""}}),t._v(" "),t._t("u-search")],2)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("a",{attrs:{href:""}},[t._v("商城公告")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("a",{attrs:{href:"../notice/active.html"}},[t._v("最新活动")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("a",{attrs:{href:""}},[t._v("我的订单")])])}]}},25:function(t,e,s){s(23);var a=s(1)(s(19),s(24),"data-v-2788891c",null);t.exports=a.exports},278:function(t,e){},319:function(t,e,s){t.exports=s.p+"static/img/first.png"},320:function(t,e,s){t.exports=s.p+"static/img/shop.png"},341:function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("CarHead",{attrs:{cutTime:t.cutTime}},[a("div",{staticStyle:{float:"right"},slot:"u-search"},[a("img",{attrs:{src:s(319),alt:""}})])]),t._v(" "),a("div",{staticClass:"g-car"},[a("div",{staticClass:"g-content"},[a("h2",[t._v("我的购物车 "),a("ins",[t._v("剩余时间 :"),a("count-down",{attrs:{endTime:t.cutTime,callback:t.callback,endText:"0S"}})],1)]),t._v(" "),a("div",{staticClass:"m-car"},[a("h3",[t._v("配送说明")]),t._v(" "),a("table",[a("tr",[a("th",[a("el-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("全选")])],1),a("th",[t._v("商品名称")]),a("th",[t._v("单价")]),a("th",[t._v("数量")]),a("th",[t._v("小计")]),a("th",[t._v("操作")])]),t._v(" "),t._l(t.cars,function(e,s){return a("tr",[a("td",[a("el-checkbox",{model:{value:e.isCheck,callback:function(t){e.isCheck=t},expression:"item.isCheck"}})],1),t._v(" "),a("td",[a("img",{attrs:{src:e.aPic,alt:""}}),a("em",[t._v(t._s(e.title))])]),t._v(" "),a("td",[a("span",[t._v(t._s(t._f("currency")(e.price)))])]),t._v(" "),a("td",[a("el-input-number",{attrs:{min:1},on:{change:function(s){t.changeNum(e)}},model:{value:e.num1,callback:function(t){e.num1=t},expression:"item.num1"}})],1),t._v(" "),a("td",[a("span",[t._v(t._s(t._f("currency")(e.price*e.num1)))])]),t._v(" "),a("td",[a("i",{staticClass:"el-icon-close",on:{click:function(s){t.del(e)}}})])])})],2)]),t._v(" "),a("div",{staticClass:"m-all"},[a("div",{staticClass:"m-left"},[a("a",{attrs:{href:""}},[t._v("继续购物")]),a("i",[t._v("|")]),t._v(" "),a("p",[t._v("共"),a("em",[t._v(t._s(t.carList))]),t._v("件商品，已选择"),a("em",[t._v(t._s(t.carCheck))]),t._v("件 ")])]),t._v(" "),a("div",{staticClass:"m-right"},[a("p",[t._v("合计（不含运费）： "),a("strong",[t._v(t._s(t._f("currency")(t.carPrice)))]),t._v("元 "),a("span",[t._v("积分："+t._s(t.carNum)+"分")]),a("a",{attrs:{href:"javascript:;"},on:{click:t.go}},[t._v("去结算")])])])]),t._v(" "),a("div",{staticClass:"g-look"},[t._m(0),t._v(" "),a("ul",{staticClass:"m-shop clearfix"},t._l(t.shopItem,function(e,s){return a("li",[a("a",{attrs:{href:"../home/detail.html?id="+e.prodPk}},[a("img",{attrs:{src:e.prodImg,alt:""}})]),t._v(" "),a("p",[t._v(t._s(e.prodNm))]),t._v(" "),a("p",[t._v("库存:"+t._s(e.stock))]),t._v(" "),a("p",[t._v("会员价："),a("em",[t._v(t._s(t._f("currency")(e.membAmt)))])]),t._v(" "),a("p",[t._v("市场价："+t._s(t._f("currency")(e.markAmt)))])])}))])])]),t._v(" "),a("McFoot")],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",[s("span",[t._v("最近预览的商品")])])}]}}},[171]);