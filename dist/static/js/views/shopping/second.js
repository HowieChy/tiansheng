webpackJsonp([9],{101:function(t,e,s){s(289);var a=s(1)(s(204),s(360),null,null);t.exports=a.exports},168:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(0),i=s(101),c=s.n(i);new a.default({render:function(t){return t(c.a)}}).$mount("#app")},204:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(2),i=s(21),c=s.n(i),r=s(4),n=s.n(r),o=s(8),l=s.n(o);e.default={data:function(){return{iScur:0,pickerOptions0:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},value:"",addressOption:[],addrPk:null,cars:[],carList:0,allPrice:0,allPrice2:0,payPrice:0,freight:28,rule:0,rule2:0,checked1:1,checked2:!1,checked3:!1,integral:0,score:0,score2:0,balance:0,balance2:0,rPrice:0,cutTime:"-999"}},components:{CarHead:c.a,McFoot:n.a,countDown:l.a},beforeCreate:function(){},beforeMount:function(){},mounted:function(){var t=this;a.a.M.store.get("login")||this.$alert("请先登录账号","提示",{confirmButtonText:"确定",callback:function(t){window.location.href="../home/index.html"}}),a.a.M.store.get("userInfo")&&(this.userId=a.a.M.store.get("userInfo").ipPk),this.getAddress("1120.10"),this.axios.get(a.a.C.url_mc+"/mall/bss/ordReqt/ordItm?t="+Date.now(),{params:{ordReqtPk:a.a.M.store.get("orderInfo").id}}).then(function(e){console.log(e.data.data),t.cars=e.data.data.items,t.cutTime=String(a.a.M.store.get("orderInfo").time/1e3),t.cars.map(function(t){this.carList=this.cars.length,this.allPrice+=t.prodAmtMemb*t.prodQty,this.allPrice2+=t.prodAmtMark*t.prodQty}.bind(t)),t.sum2(),t.rPrice=Math.floor(parseInt(t.allPrice+t.freight)/10)}).catch(function(t){}),this.axios.get(a.a.C.url_mc+"/mall/bss/ip/asset",{params:{ipPk:this.userId}}).then(function(e){t.integral=e.data.data.point,t.balance=e.data.data.wallet,t.rule=e.data.data.rule,t.score=t.integral}).catch(function(t){})},watch:{score:function(){this.score>this.integral&&(this.score=this.integral,this.score2=this.score),String(this.score).match(/^\d+$/)||(this.score=""),this.checked2&&(this.score2=this.score,this.rule2=this.rule*this.score),this.checked3&&this.sum(),this.allPrice+this.freight-this.score2*this.rule<0&&(this.score=100*(this.allPrice+this.freight)),this.sum2()}},methods:{tab:function(t,e){"待审核"!=t.auditStatNmCn&&(this.iScur=e)},change1:function(){},change2:function(){this.checked2?(this.score2=this.score,this.rule2=this.rule*this.score):(this.score2=0,this.rule2=0),this.checked3&&this.sum(),this.sum2()},change3:function(){this.checked3?this.sum():this.balance2=0,this.sum2()},callback:function(){},handleChange:function(t){this.ruleForm.address=t},getAddress:function(t){var e=this;this.axios.get(a.a.C.url_mc+"/mall/bss/addr/addrList",{params:{ipPk:this.userId,statCd:t}}).then(function(s){"1120.10"==t?(e.addressOption=s.data.data.items,e.addrPk=s.data.data.items[0].addrPk):e.addressHide=s.data.data.items}).catch(function(t){console.log(t)})},sum:function(){this.balance>=this.allPrice+this.freight-this.score2*this.rule?this.allPrice+this.freight-this.score2*this.rule>=0?this.balance2=this.allPrice+this.freight-this.score2*this.rule:(this.balance2=this.allPrice+this.freight,this.score=100*(this.allPrice+this.freight)):this.balance2=this.balance},sum2:function(){this.payPrice=this.allPrice+this.freight-this.score2*this.rule-this.balance2},pOrder:function(){var t=this;console.log(a.a.M.store.get("orderInfo").id,this.userId,this.addrPk,this.score2,this.checked3);var e=s(7);this.axios.post(a.a.C.url_mc+"/mall/bss/ordReqt/subOrd",e.stringify({ordPk:a.a.M.store.get("orderInfo").id,ipPk:this.userId,addrPk:this.addrPk,discountPk:"",fDiscountPk:"",usePoint:this.score2,useWallet:this.checked3})).then(function(e){console.log(e.data),200==e.data.status&&t.$alert("订单提交成功","提示",{confirmButtonText:"确定",callback:function(t){window.location.href="../shopping/true.html"}}),400==e.data.status&&t.$alert(e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}}),308==e.data.status&&t.$alert("订单提交成功","提示",{confirmButtonText:"确定",callback:function(t){window.location.href="../shopping/pay.html"}}),302==e.data.status&&t.$alert("订单提交成功","提示",{confirmButtonText:"确定",callback:function(t){}}),312==e.data.status&&t.$alert("订单已取消","提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){console.log(t)})}}}},289:function(t,e){},325:function(t,e,s){t.exports=s.p+"static/img/second.png"},360:function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("CarHead",{attrs:{cutTime:t.cutTime}},[a("div",{staticStyle:{float:"right"},slot:"u-search"},[a("img",{attrs:{src:s(325),alt:""}})])]),t._v(" "),a("div",{staticClass:"g-car"},[a("div",{staticClass:"g-content"},[a("h2",[t._v("核对订单 "),a("ins",[t._v("剩余时间 :"),a("count-down",{attrs:{endTime:t.cutTime,callback:t.callback,endText:"0S"}})],1)]),t._v(" "),a("div",{staticClass:"g-check"},[a("div",{staticClass:"m-address"},[a("h2",[t._v("收货地址")]),t._v(" "),a("ul",{staticClass:"clearfix"},t._l(t.addressOption,function(e,s){return a("li",{class:{"f-active":t.iScur==s},on:{click:function(a){t.tab(e,s)}}},[a("h1",[a("span",[t._v(t._s(e.rcvr))]),t._v(" "),"待审核"!=e.auditStatNmCn?a("em",[t._v("审核通过可使用")]):t._e(),t._v(" "),"待审核"==e.auditStatNmCn?a("em",[t._v("正在审核")]):t._e()]),t._v(" "),a("p",[t._v(t._s(e.mob))]),t._v(" "),a("p",[t._v(t._s(e.fullAddr))])])}))]),t._v(" "),a("div",{staticClass:"m-middle"},[t._m(0),t._v(" "),a("h3",[a("em",[t._v("运费")]),t.freight?a("span",[t._v(t._s(t._f("currency")(t.freight)))]):t._e(),t.freight?t._e():a("strong",[t._v("免费")])]),t._v(" "),t._e()]),t._v(" "),a("div",{staticClass:"m-bottom"},[a("table",[t._m(1),t._v(" "),t._l(t.cars,function(e,s){return a("tr",[a("td",[a("a",{attrs:{href:""}},[a("img",{attrs:{src:e.prodImgUrl,alt:""}}),a("em",[t._v(t._s(e.nm)+" X "+t._s(e.prodQty))])])]),t._v(" "),a("td",[a("span",[t._v(t._s(t._f("currency")(e.prodAmtMemb))+" ")])]),t._v(" "),a("td",[a("span",[t._v(t._s(t._f("currency")(e.prodAmtMark))+" ")])]),t._v(" "),a("td",[a("span",[t._v(t._s(t._f("currency")(e.prodAmtMemb*e.prodQty)))])])])})],2),t._v(" "),a("div",{staticClass:"m-info "},[a("div",{staticClass:"clearfix",staticStyle:{"border-bottom":"1px solid #ddd","margin-bottom":"20px"}},[a("div",{staticClass:"left "},[a("p",{staticStyle:{"margin-left":"24px",color:"#fe3000"}},[t._v("新用户首单享五折优惠")]),t._v(" "),a("p",[a("el-radio",{attrs:{label:"1"},model:{value:t.checked1,callback:function(e){t.checked1=e},expression:"checked1"}},[t._v("订单满￥100.00赠送三斤小黄瓜，折合市场价￥20.00")])],1),t._v(" "),a("p",[a("el-radio",{attrs:{label:"2"},model:{value:t.checked1,callback:function(e){t.checked1=e},expression:"checked1"}},[t._v("订单满￥100.00赠送三斤小黄瓜，折合市场价￥20.00")])],1)]),t._v(" "),a("div",{staticClass:"right"},[a("p",[a("span",[t._v("总计： "+t._s(t._f("currency")(t.allPrice)))])])])]),t._v(" "),a("div",{staticClass:"clearfix"},[a("div",{staticClass:"left "},[a("p",[a("el-checkbox",{on:{change:t.change2},model:{value:t.checked2,callback:function(e){t.checked2=e},expression:"checked2"}},[t._v("使用积分 "),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.score,expression:"score",modifiers:{lazy:!0}}],attrs:{type:"number",min:"0"},domProps:{value:t.score},on:{change:function(e){t.score=e.target.value}}}),t._v(" 分 当前账号总积分为"+t._s(t.integral)+"分，最多可用"+t._s(t.integral)+"分，抵扣"+t._s(t.score*t.rule)+"元")])],1),t._v(" "),a("p",[a("el-checkbox",{on:{change:t.change3},model:{value:t.checked3,callback:function(e){t.checked3=e},expression:"checked3"}},[t._v("使用账户余额 当前账号余额为"+t._s(t._f("currency")(t.balance)))])],1)]),t._v(" "),a("div",{staticClass:"right"},[a("p",[t._v("商品市场价总和： "),a("span",[t._v(t._s(t._f("currency")(t.allPrice2)))])]),t._v(" "),a("p",[t._v("商品结算价综合： "),a("span",[t._v(t._s(t._f("currency")(t.allPrice)))])]),t._v(" "),a("p",[t._v("运费： "),a("span",[t._v(t._s(t._f("currency")(t.freight)))])]),t._v(" "),a("p",[t._v("订单总计： "),a("span",[t._v(t._s(t._f("currency")(t.allPrice+t.freight)))])]),t._v(" "),a("p",[t._v("积分支付： "),a("span",[t._v(t._s(t.score2)+"分（抵"+t._s(t._f("currency")(t.rule2))+"）")])]),t._v(" "),a("p",[t._v("余额支付： "),a("span",[t._v(t._s(t._f("currency")(t.balance2)))])]),t._v(" "),a("p",[t._v("还需支付： "),a("span",[a("strong",[t._v(t._s(t._f("currency")(t.payPrice)))])])])])]),t._v(" "),a("div",{staticClass:"submit"},[a("p",[t._v("支付成功后可得积分："+t._s(t.rPrice)+"分 "),a("button",{on:{click:t.pOrder}},[t._v("提交订单")])])])])])])])]),t._v(" "),a("McFoot")],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h3",[s("em",[t._v("配送方式")]),s("strong",[t._v("快递")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",{staticClass:"top"},[s("th",[t._v("商品")]),s("th",[t._v("市场价")]),s("th",[t._v("结算价")]),s("th",[t._v("小计")])])}]}}},[168]);